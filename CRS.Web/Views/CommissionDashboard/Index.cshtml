@*@using CRS.BusinessEntities*@
@{
	ViewBag.Title = "Commission Dashboard";
}

@section styles {
 <link href="@Url.Content("~/Content/themes/base/minified/jquery-ui.min.css")" rel="stylesheet" type="text/css" />
 <link href="@Url.Content("~/Content/Bootstrap/bootstrap.min.css")" rel="stylesheet" type="text/css" />
 <link href="@Url.Content("~/Content/Bootstrap/bootstrap-responsive.min.css")" rel="stylesheet" type="text/css" />
 <link href="@Url.Content("~/Content/Bootstrap/bootstrap-image-gallery.min.css")" rel="stylesheet" type="text/css" />
 <link href= "@Url.Content("~/Content/ambience/jquery.ambiance.css")" rel="stylesheet" />
		<style type="text/css">
		#tblSearchFilter td {
			background-color: transparent;
			border: medium none !important;
			font-size: 14px;
			width: 200px;
		}
		
	   .contentHolder  .dataTables_filter  input {
			float: right;
			margin: 0 0 0 0 ;
		}
		.contentHolder .dataTables_filter label {
			float: none;
		}
		.compactRadioGroup LABEL,
		 .compactRadioGroup INPUT {
			display: inline !important;
			width: auto !important; 
			margin-right: 5px;  
			margin-left: 5px;   
		}

		.labelInline {
			clear:both;
		}
		.selectInline {
			float:left;
		}
		.dropdownDate 
		{
			  display:inline-block;
			  margin:0 10px 10px 0;
			  *display:inline;
			  zoom:1;
		} 
	
	</style>
 
   
}

@section featured {
	<section class="featured">
		<div class="content-wrapper">
			<hgroup class="title">
				<h1>@ViewBag.Title.</h1>
				
			</hgroup>
		</div>
	</section>
}

@section jquerylibrary{
	 <script src= "@Url.Content("~/Scripts/jquery-2.0.2.min.js")" type="text/javascript"></script>
}

@section scripts {
		<script src="@Url.Content("~/Scripts/knockout-2.2.1.js")" type="text/javascript"></script>
		@Scripts.Render("~/bundles/ajaxwrapper")
		@Scripts.Render("~/bundles/koMappings")
		@Scripts.Render("~/bundles/koBindings")
		<script src="@Url.Content("~/Scripts/jquery.maskedinput-1.3.1.min.js")" type="text/javascript"></script>
		<script src="@Url.Content("~/Scripts/jquery.filter_input.js")" type="text/javascript"></script>
		<script src="@Url.Content("~/Scripts/Application/CommissionDashboard.js")" type="text/javascript"></script>
		<script src="@Url.Content("~/Scripts/jquery.blockUI.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Content/ambience/jquery.ambiance.js")"  type="text/javascript"></script>
		<script src="@Url.Content("~/Scripts/Application/ReportHelper.js")"  type="text/javascript"></script>
		<script src="@Url.Content("~/Content/Bootstrap/bootstrap-image-gallery.min.js")" type="text/javascript"></script> 	
		<script src="@Url.Content("~/Content/Bootstrap/bootstrap.js")" type="text/javascript"></script> 
		<script Id="summaryTemplate" type="text/html">
			<td>
				<span data-bind="text: ChannelName" />
			</td>
			<td>
				<span data-bind="text: RegionName" />
			</td>
			@*<td>
				<span data-bind="text: AreaName" />
			</td>*@
			<td>
				<span data-bind="text: DistrictName" />
			</td>
			<td>
				<span data-bind="text: BranchName" />
			</td>
            <td>
				<span data-bind="text: BranchCode" />
			</td>
			<td>
				<span data-bind="text: BranchManagerName" />
			</td>
            <td>
				<span data-bind="text: ReferrorName" />
			</td>
            <td>
				<span data-bind="text: ReferrorCode" />
			</td>
			<td>
				<span data-bind="text: ApprovalCount" />
			</td>
			@*<td>
				<span data-bind="text: ApplicationInflowsCount" />
			</td>*@
			<td>
				<span data-bind="text: VariableString" />
			</td>
			<td>
				<span data-bind="text: GrossAmountString" />
			</td>
			<td>
				<span data-bind="text: TaxAmountString" />
			</td>
			<td>
				<span data-bind="text: NetAmountString" />
			</td>
	</script> 
	<script Id="detailTemplate" type="text/html">
			<td>
				<span data-bind="text: ChannelName" />
			</td>
			<td>
				<span data-bind="text: RegionName" />
			</td>
		@*	<td>
				<span data-bind="text: AreaName" />
			</td>*@
			<td>
				<span data-bind="text: DistrictName" />
			</td>
			<td>
				<span data-bind="text: BranchName" />
			</td>
            <td>
				<span data-bind="text: BranchCode" />
			</td>
			<td>
				<span data-bind="text: BranchManagerName" />
			</td>
			@*<td>
				<span data-bind="text: OutletName" />
			</td>*@
			<td>
				<span data-bind="text: SourceCode" />
			</td>
			<td>
				<span data-bind="text: ApplicationNo" />
			</td>
			<td>
				<span data-bind="text: CardBrand" />
			</td>
			<td>
				<span data-bind="text: CardType" />
			</td>
			<td>
				<span data-bind="text: ApplicantFullName" />
			</td>
			<td>
				<span data-bind="text: ReferrorName" />
			</td>
            <td>
				<span data-bind="text: ReferrorCode" />
			</td>
			<td>
				<span data-bind="text: DateStatus" />
			</td>
			<td>
				<span data-bind="text: ApprovalCount" />
			</td>
			<td>
				<span data-bind="text: VariableString" />
			</td>
			<td>
				<span data-bind="text: GrossAmountString" />
			</td>
			<td>
				<span data-bind="text: TaxAmountString" />
			</td>
			<td>
				<span data-bind="text: NetAmountString" />
			</td>					   
	</script>    
}
<div id="applicationStatusSearch" data-bind="visible: isUser" >
	<div class="columnBox2">
		<div>
			<label>Mode:</label>
			
				<div class="compactRadioGroup">
					<input type='radio' name='onlyOne' id="summary" data-bind='checked: isSummary' value=true /> 
					<label for="summary">Summary</label>
					<input type='radio'  name='onlyOne' id="detail" data-bind='checked: isSummary' value=false  />
					<label for="detail">Detail</label>
				</div>
			
		</div>

		<div>
			<label for="ddReport">Type:</label>	
			
			<div class="shortCombo">
				<select name="ddReport" data-bind="options: reportList,optionsText: 'Name', optionsValue: 'Code', value: selectedReport"></select>
			</div>

		</div>
		<div>
			 <label>Channel:</label>
			 <div class="shortCombo">
						<select id="ddChannel" data-bind="options: channelList, enable: enableChannel,
							optionsText: 'Name',
							optionsValue: 'Code',
							value: selectedChannel,
							optionsCaption: '-- All --'" ></select>
			</div>
		</div>
		@*<div>
			<label>Area:</label>
			 <div class="shortCombo">
						<select id="ddArea" data-bind="options: areaList, enable: enableArea,
						optionsText: 'Name',
						optionsValue: 'Code',
						value: selectedArea,
						optionsCaption: '-- All --'" ></select>
			</div>	
		</div>	*@
		<div>
			<label>District:</label>
			<div class="shortCombo">
						<select id="ddDistrict" data-bind="options: districtList, enable: enableDistrict,
                            optionsText: 'Name',
                            optionsValue: 'Code',
                            value: selectedDistrict,
                            optionsCaption: '-- All --'" ></select>
			</div>
		</div>
        <div id="divName">
			<label>Keyword:</label>
			<input type="text" id="txtName" maxlength="50" data-bind="value: searchName" /> 
		</div>		  	  
	</div>


	 <div class="columnBox2">
		 <div></div>
		 @*<div>for steve this is the first field</div>*@
		 <div>
				<div class="daily">
					<label for="dailyDate" class="daily">Start:</label>
					<input type="text" name="dailyDate" class="daily" id="dtDaily" data-bind="value: dateFrom" />
				</div>
				<div class="weekly">
					<label for="startDate" class="weekly">Start:</label>
					<input id="dtWeeklyFrom" class="weekly" data-bind="datepicker: dtWeeklyFrom, datepickerOptions: {
															showOn: 'button',
															buttonImage: '../Content/images/calendar-icon.png',
															buttonImageOnly: true,
															beforeShowDay: allowedDays,
															onSelect: setWeeklyDate,
															maxDate: '-1d'
														}" />
				</div>
				<div class="others">
					<label for="othersDateFrom" class="others">Start:</label>
					<input name="othersDateFrom" id="dtOthersFrom" class="others" data-bind="datepicker: dtOthersFrom, datepickerOptions: {
																				showOn: 'button',
																				buttonImage: '../Content/images/calendar-icon.png',
																				buttonImageOnly: true,
																				maxDate: '-1d'
																			}" />
				</div> 
				<div class="monthly">
					<label>Month:</label>
					<div class="shortCombo">
						<select data-bind="options: monthsList,
										optionsText: 'Name',
										optionsValue: 'Code',
										value: selectedMonth" ></select>
					</div>
				</div>
				<div class="quarterly">
					<label>Quarter:</label>
					<div class="shortCombo">
						<select data-bind="options: quarterList,
										optionsText: 'Name',
										optionsValue: 'Code',
										value: selectedQuarter" ></select>
					</div>
				</div>
				<div class="yearly">
					<label>Year:</label>
					<div class="shortCombo">
						<select data-bind="options: yearsList,
										optionsText: 'Name',
										optionsValue: 'Code',
										value: selectedYear" ></select>
					</div>
				</div>
		</div>
		<div>
			 <label>Region:</label>
			 <div class="shortCombo">
						<select id="ddRegion" data-bind="options: regionList, enable: enableRegion,
							optionsText: 'Name',
							optionsValue: 'Code',
							value: selectedRegion,
							optionsCaption: '-- All --'" ></select>
			</div>
		</div>
        <div>
			<label>Branch:</label>
			<div class="shortCombo">
						<select id="ddBranch" data-bind="options: branchList, enable: enableBranch,
                            optionsText: 'Name',
                            optionsValue: 'Code',
                            value: selectedBranch,
                            optionsCaption: '-- All --'" ></select>
			</div>	
		</div>		
	</div>
	<div class="columnBox2">
		<div></div>
		@*<div>for steve this is the second field</div>*@
		<div>
			<div class="weekly">
				<label for="endDate" class="weekly">End:</label>
				<input id="dtWeeklyTo" class="weekly" data-bind="enable: false, datepicker: dtWeeklyTo, datepickerOptions: {
																	showOn: 'button',
																	buttonImage: '../Content/images/calendar-icon.png',
																	buttonImageOnly: true,
																}" />
			</div>
			<div class="others">
				<label for="othersDateTo" class="others">End:</label>
				<input name="othersDateTo" id="dtOthersTo" class="others" data-bind="datepicker: dtOthersTo, datepickerOptions: {
																		showOn: 'button',
																		buttonImage: '../Content/images/calendar-icon.png',
																		buttonImageOnly: true,
																		maxDate: '-1d'
																	}" />
			</div>
			<div class="monthly">
					<label>Year:</label>
					<div class="shortCombo">
						<select data-bind="options: yearsList,
										optionsText: 'Name',
										optionsValue: 'Code',
										value: selectedYear" ></select>
					</div>
			</div>
			 <div class="quarterly">
					<label>Year:</label>
					<div class="shortCombo">
						<select data-bind="options: yearsList,
										optionsText: 'Name',
										optionsValue: 'Code',
										value: selectedYear" ></select>
					</div>
			</div>
		</div>
		
	</div>
</div>
<div class="clear"></div>
<button data-bind="click: searchCommDashboard, visible:isUser" style="margin-top:10px; margin-bottom:10px">
					<strong>Search</strong>
</button>      
<div  class="float-left">
@* Knockout js and datatable approach  *@
<div id="demo">
	<div id="tblDetail">
			<table cellpadding="0" cellspacing="0" border="0" class="display" id="commListDetail"
					data-bind = "dataTable: {
			dataSource: detailList,
			rowTemplate: 'detailTemplate',
			columns: ['ChannelName', 'RegionName', 'DistrictName', 'BranchName', 'BranchCode', 'BranchManagerName', 
					   'SourceCode', 'ApplicationNo', 'CardBrand', 'CardType', 'ApplicantFullName', 'ReferrorName', 'ReferrorCode', 'DateStatus',
					   'ApprovalCount', 'VariableString', 'GrossAmountString', 'TaxAmountString', 'NetAmountString'],
							options: {
								bJQueryUI: true,
								bPaginate: true,
								bLengthChange: true,
								bFilter: true,
								bSort: true,
								bInfo: true,
								bAutoWidth: true,
								bProcessing: true,
								sPaginationType: 'full_numbers',
								bDeferRender: true
							}
						}"> 
						<thead> 
						<tr class="gradeX">
							<th>Channel</th>
							<th>Region</th>
							@*<th>Area</th>*@
							<th>District</th>
							<th>Branch</th>
                            <th>Br Code</th>
							<th>Manager</th>
							@*<th>Outlet</th>*@
							<th>Source Code</th>
							<th>Application No</th>
							<th>Card Brand</th>
							<th>Card Type</th>
							<th>Applicant</th>
							<th>Referror</th>
                            <th>Ref Code</th>
							<th>Status Date</th>
							<th>Count</th>
							<th>Variable</th>
							<th>Gross Amount</th>
							<th>Tax</th>
							<th>Net Amount</th>
						</tr>
						</thead> 
						<tbody>
	
						</tbody>
				</table>
            <div style="float:right">
                   <label class="lblTotals">Total Appr Count: </label>&nbsp;<label data-bind="text: totalCountDetails" class="lblTotals"></label>
                   <label>;&nbsp;&nbsp;&nbsp</label>
                   <label class="lblTotals">Total Apprv Amount: </label>&nbsp;<label data-bind="text: totalCommAmoutDetails" class="lblTotals"></label>
            </div>
		</div>
		<div id="tblSummary">
			<table cellpadding="0" cellspacing="0" border="0" class="display" id="commListSummary"
					data-bind = "dataTable: {
					dataSource: summaryList,
					rowTemplate: 'summaryTemplate',
					columns: ['ChannelName', 'RegionName', 'DistrictName', 'BranchName', 'BranchCode', 'BranchManagerName', 'ReferrorName', 'ReferrorCode',
							  'ApprovalCount', 'VariableString', 'GrossAmountString', 'TaxAmountString', 'NetAmountString'],
					options: {
						bJQueryUI: true,
						bPaginate: true,
						bLengthChange: true,
						bFilter: true,
						bSort: true,
						bInfo: true,
						bAutoWidth: true,
						bProcessing: true,
						sPaginationType: 'full_numbers',
						bDeferRender: true
					}
				}"> 
										<thead> 
										<tr class="gradeX">
											<th>Channel</th>
											<th>Region</th>
											@*<th>Area</th>*@
											<th>District</th>
											<th>Branch</th>
                                            <th>Br Code</th>
											<th>Manager</th>
                                            <th>Referror</th>
                                            <th>Ref Code</th>
											<th>Approvals</th>
											@*<th>Inflows</th>*@
											<th>Variable</th>
											<th>Gross Amount</th>
											<th>Tax</th>
											<th>Net Amount</th>
										</tr>
										</thead> 
										<tbody>
										</tbody>                                      										
			</table>
            <div style="float:right">
                   <label class="lblTotals">Total Apprv Count: </label>&nbsp;<label data-bind="text: totalCountSummary" class="lblTotals"></label>
                   <label>;&nbsp;&nbsp;&nbsp</label>
                   <label class="lblTotals">Total Apprv Amount: </label>&nbsp;<label data-bind="text: totalCommAmoutSummary" class="lblTotals"></label>
            </div>
          	</div>
	</div>
    <div style="clear:both"></div>
	<br />
	@if ( (ViewBag.PageAccess as CRS.BusinessEntities.UserPageAccess).CanPrint)
	{
		<div align="center">
			<button data-bind="click: getReportData, visible: showPrint" style="margin-top:10px; margin-bottom:10px">
			   <strong> Print </strong>
			</button>
		</div>
	  }
 </div>
<div style ="clear:both"></div>



		
		